<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Pages - Mobile Responsive Test</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Remix Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.bootstrap5.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="assets/css/admin-panel-custom.css" rel="stylesheet">
    
    <style>
        body { padding: 1rem; background: #f8fafc; }
        .test-section { margin-bottom: 2rem; padding: 1rem; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .device-frame { border: 2px solid #ddd; border-radius: 12px; overflow: hidden; margin: 1rem 0; }
        .test-header { color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 0.5rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-4">Market Pages - Mobile Responsive Test</h1>
                
                <!-- Test Section 1: Stats Cards -->
                <div class="test-section">
                    <h3 class="test-header"><i class="ri-dashboard-line me-2"></i>Market Stats Cards</h3>
                    <p class="text-muted">Test the responsive behavior of market statistics cards across different screen sizes.</p>
                    
                    <div class="row g-3 mb-4">
                        <div class="col-6 col-md-3">
                            <div class="card stats-card border-0 shadow-sm">
                                <div class="card-body p-3">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm flex-shrink-0">
                                            <span class="avatar-title bg-primary-subtle text-primary rounded-circle fs-3">
                                                <i class="ri-stock-line"></i>
                                            </span>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <p class="text-uppercase fw-medium text-muted text-truncate fs-6 mb-1">Total Markets</p>
                                            <h4 class="mb-0">12</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="card stats-card border-0 shadow-sm">
                                <div class="card-body p-3">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm flex-shrink-0">
                                            <span class="avatar-title bg-success-subtle text-success rounded-circle fs-3">
                                                <i class="ri-check-line"></i>
                                            </span>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <p class="text-uppercase fw-medium text-muted text-truncate fs-6 mb-1">Active</p>
                                            <h4 class="mb-0">8</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="card stats-card border-0 shadow-sm">
                                <div class="card-body p-3">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm flex-shrink-0">
                                            <span class="avatar-title bg-warning-subtle text-warning rounded-circle fs-3">
                                                <i class="ri-pause-line"></i>
                                            </span>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <p class="text-uppercase fw-medium text-muted text-truncate fs-6 mb-1">Inactive</p>
                                            <h4 class="mb-0">4</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="card stats-card border-0 shadow-sm">
                                <div class="card-body p-3">
                                    <div class="d-flex align-items-center">
                                        <div class="avatar-sm flex-shrink-0">
                                            <span class="avatar-title bg-info-subtle text-info rounded-circle fs-3">
                                                <i class="ri-time-line"></i>
                                            </span>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <p class="text-uppercase fw-medium text-muted text-truncate fs-6 mb-1">Open Now</p>
                                            <h4 class="mb-0">3</h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Section 2: Market Table -->
                <div class="test-section">
                    <h3 class="test-header"><i class="ri-table-line me-2"></i>Responsive Market Table</h3>
                    <p class="text-muted">Test the responsive data table with market information.</p>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center g-3">
                                <div class="col-md-8 col-12">
                                    <h5 class="card-title mb-0">Market Management</h5>
                                    <small class="text-muted d-block d-md-inline">All times shown in UTC timezone</small>
                                </div>
                                <div class="col-md-4 col-12">
                                    <div class="d-flex gap-2 justify-content-end">
                                        <a href="#" class="btn btn-primary flex-fill flex-md-grow-0">
                                            <i class="ri-add-box-fill"></i> 
                                            <span class="d-none d-sm-inline">New Market</span>
                                            <span class="d-sm-none">New</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="marketsTestTable" class="table table-hover table-nowrap align-middle mb-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="text-center" style="width: 60px;">#</th>
                                            <th>Market Schedule</th>
                                            <th class="text-center">Status</th>
                                            <th class="d-none d-lg-table-cell">Created At</th>
                                            <th class="text-center" style="width: 120px;">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-center fw-medium">1</td>
                                            <td>
                                                <div class="d-flex flex-column">
                                                    <div class="d-flex align-items-center mb-1">
                                                        <i class="ri-time-line text-muted me-2"></i>
                                                        <span class="fw-medium">09:00 - 17:00</span>
                                                        <span class="badge bg-success-subtle text-success ms-2 pulse-badge">
                                                            <i class="ri-live-line me-1"></i>Live
                                                        </span>
                                                    </div>
                                                    <small class="text-muted d-lg-none">
                                                        <i class="ri-calendar-line me-1"></i>Jan 15, 2024
                                                    </small>
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                <div class="form-check form-switch d-flex justify-content-center">
                                                    <input class="form-check-input market-status-toggle" type="checkbox" 
                                                           data-market-id="1" checked id="marketToggle1">
                                                    <label class="form-check-label ms-2" for="marketToggle1">
                                                        <span class="badge bg-success" id="statusBadge1">Active</span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td class="d-none d-lg-table-cell text-muted">Jan 15, 2024 08:30</td>
                                            <td>
                                                <div class="d-flex justify-content-center gap-2">
                                                    <a href="#" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="Edit Market">
                                                        <i class="ri-edit-2-line"></i>
                                                    </a>
                                                    <a href="#" class="btn btn-sm btn-outline-danger" data-bs-toggle="tooltip" title="Delete Market">
                                                        <i class="ri-delete-bin-line"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-center fw-medium">2</td>
                                            <td>
                                                <div class="d-flex flex-column">
                                                    <div class="d-flex align-items-center mb-1">
                                                        <i class="ri-time-line text-muted me-2"></i>
                                                        <span class="fw-medium">10:00 - 16:00</span>
                                                    </div>
                                                    <small class="text-muted d-lg-none">
                                                        <i class="ri-calendar-line me-1"></i>Jan 14, 2024
                                                    </small>
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                <div class="form-check form-switch d-flex justify-content-center">
                                                    <input class="form-check-input market-status-toggle" type="checkbox" 
                                                           data-market-id="2" id="marketToggle2">
                                                    <label class="form-check-label ms-2" for="marketToggle2">
                                                        <span class="badge bg-danger" id="statusBadge2">Inactive</span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td class="d-none d-lg-table-cell text-muted">Jan 14, 2024 12:15</td>
                                            <td>
                                                <div class="d-flex justify-content-center gap-2">
                                                    <a href="#" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="Edit Market">
                                                        <i class="ri-edit-2-line"></i>
                                                    </a>
                                                    <a href="#" class="btn btn-sm btn-outline-danger" data-bs-toggle="tooltip" title="Delete Market">
                                                        <i class="ri-delete-bin-line"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Section 3: Market Form -->
                <div class="test-section">
                    <h3 class="test-header"><i class="ri-form-line me-2"></i>Responsive Market Form</h3>
                    <p class="text-muted">Test the responsive form layout for creating/editing markets.</p>
                    
                    <div class="row justify-content-center">
                        <div class="col-12 col-lg-8 col-xl-6">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row align-items-center g-3">
                                        <div class="col-12 col-md-8">
                                            <h5 class="card-title mb-0">Create Market</h5>
                                            <small class="text-muted d-block d-md-inline">
                                                <i class="ri-time-zone-line me-1"></i>Timezone: UTC (Current: 14:30)
                                            </small>
                                        </div>
                                        <div class="col-12 col-md-4">
                                            <div class="d-flex gap-2 justify-content-end">
                                                <a href="#" class="btn btn-outline-primary flex-fill flex-md-grow-0">
                                                    <i class="ri-arrow-left-line"></i> 
                                                    <span class="d-none d-sm-inline">All Markets</span>
                                                    <span class="d-sm-none">Back</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <form id="testMarketForm" class="needs-validation" novalidate>
                                        <div class="mb-4">
                                            <h6 class="fw-semibold text-muted mb-3">
                                                <i class="ri-time-line me-1"></i>Market Schedule
                                            </h6>
                                            
                                            <div class="row g-3">
                                                <div class="col-12 col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="time" class="form-control" name="open_time" 
                                                               value="09:00" id="testOpenTime" required>
                                                        <label for="testOpenTime">
                                                            <i class="ri-sun-line me-1"></i>Market Opens At
                                                        </label>
                                                        <div class="form-text">
                                                            <i class="ri-information-line me-1"></i>Time in UTC timezone
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-12 col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <input type="time" class="form-control" name="close_time" 
                                                               value="17:00" id="testCloseTime" required>
                                                        <label for="testCloseTime">
                                                            <i class="ri-moon-line me-1"></i>Market Closes At
                                                        </label>
                                                        <div class="form-text">
                                                            <i class="ri-information-line me-1"></i>Time in UTC timezone
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="alert alert-light border d-flex align-items-center" id="testDurationPreview">
                                                <i class="ri-time-line text-primary me-2"></i>
                                                <span id="testDurationText">Market will be open for 8 hours</span>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h6 class="fw-semibold text-muted mb-3">
                                                <i class="ri-settings-line me-1"></i>Market Configuration
                                            </h6>
                                            
                                            <div class="card bg-light border-0">
                                                <div class="card-body p-3">
                                                    <div class="d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <div class="avatar-sm flex-shrink-0 me-3">
                                                                <div class="avatar-title bg-primary-subtle text-primary rounded-circle">
                                                                    <i class="ri-toggle-line"></i>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <h6 class="mb-1">Market Status</h6>
                                                                <p class="text-muted mb-0 small">Enable or disable market trading</p>
                                                            </div>
                                                        </div>
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" name="is_active" 
                                                                   value="1" checked id="testMarketActiveToggle">
                                                            <label class="form-check-label" for="testMarketActiveToggle">
                                                                <span class="badge bg-success" id="testStatusBadge">Active</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-flex gap-3 justify-content-end flex-column flex-sm-row">
                                            <button type="button" class="btn btn-light">
                                                <i class="ri-close-line me-1"></i>Cancel
                                            </button>
                                            <button type="submit" class="btn btn-primary" id="testSubmitBtn">
                                                <i class="ri-save-line me-1"></i>
                                                <span class="submit-text">Create Market</span>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Section 4: Device Simulation -->
                <div class="test-section">
                    <h3 class="test-header"><i class="ri-smartphone-line me-2"></i>Responsive Breakpoints</h3>
                    <p class="text-muted">Use your browser's developer tools to test different screen sizes:</p>
                    
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="alert alert-primary">
                                <h6><i class="ri-smartphone-line me-1"></i> Mobile (320px - 576px)</h6>
                                <ul class="small mb-0">
                                    <li>Stats cards: 2 per row</li>
                                    <li>Table: Responsive columns</li>
                                    <li>Form: Stacked layout</li>
                                    <li>Touch-friendly buttons</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="alert alert-success">
                                <h6><i class="ri-tablet-line me-1"></i> Tablet (576px - 992px)</h6>
                                <ul class="small mb-0">
                                    <li>Stats cards: 2-4 per row</li>
                                    <li>Table: Some columns hidden</li>
                                    <li>Form: Mixed layout</li>
                                    <li>Balanced spacing</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="alert alert-info">
                                <h6><i class="ri-computer-line me-1"></i> Desktop (992px+)</h6>
                                <ul class="small mb-0">
                                    <li>Stats cards: 4 per row</li>
                                    <li>Table: All columns visible</li>
                                    <li>Form: Horizontal layout</li>
                                    <li>Full feature set</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.4.1/js/responsive.bootstrap5.min.js"></script>

    <script>
        $(document).ready(function() {
            // Initialize test DataTable
            var isMobile = window.innerWidth <= 768;
            
            $('#marketsTestTable').DataTable({
                responsive: true,
                pageLength: isMobile ? 5 : 10,
                columnDefs: [
                    { targets: [0], responsivePriority: 1, width: '60px' },
                    { targets: [1], responsivePriority: 2 },
                    { targets: [2], responsivePriority: 3, width: '120px' },
                    { targets: [-1], responsivePriority: 4, orderable: false, width: '120px' }
                ],
                language: {
                    search: '',
                    searchPlaceholder: 'Search markets...',
                    paginate: {
                        first: '<i class="ri-skip-back-line"></i>',
                        last: '<i class="ri-skip-forward-line"></i>',
                        next: '<i class="ri-arrow-right-s-line"></i>',
                        previous: '<i class="ri-arrow-left-s-line"></i>'
                    }
                }
            });

            // Test form functionality
            $('#testMarketActiveToggle').on('change', function() {
                const badge = $('#testStatusBadge');
                if ($(this).is(':checked')) {
                    badge.removeClass('bg-danger').addClass('bg-success').text('Active');
                } else {
                    badge.removeClass('bg-success').addClass('bg-danger').text('Inactive');
                }
                
                // Haptic feedback simulation
                if ('vibrate' in navigator && isMobile) {
                    navigator.vibrate(50);
                }
                
                // Silent operation - no popup notifications
            });

            // Test switch toggles with loading animation
            $('.market-status-toggle').on('change', function() {
                const toggle = $(this);
                const marketId = toggle.data('market-id');
                const badge = $(`#statusBadge${marketId}`);
                const isChecked = toggle.is(':checked');
                
                // Show loading state
                const parent = toggle.parent();
                parent.addClass('loading-switch');
                toggle.prop('disabled', true);
                
                // Simulate AJAX delay
                setTimeout(function() {
                    // Update badge
                    if (isChecked) {
                        badge.removeClass('bg-danger').addClass('bg-success').text('Active');
                    } else {
                        badge.removeClass('bg-success').addClass('bg-danger').text('Inactive');
                    }
                    
                    // Remove loading state
                    parent.removeClass('loading-switch');
                    toggle.prop('disabled', false);
                    
                    // Haptic feedback
                    if ('vibrate' in navigator && isMobile) {
                        navigator.vibrate(50);
                    }
                }, 1000);
            });

            // Initialize tooltips
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });

            // Responsive behavior testing
            $(window).on('resize', function() {
                const newIsMobile = window.innerWidth <= 768;
                if (newIsMobile !== isMobile) {
                    isMobile = newIsMobile;
                    console.log('Screen size changed. Mobile mode:', isMobile);
                }
            });

            console.log('Market pages responsive test initialized successfully!');
            console.log('Mobile mode:', isMobile);
            console.log('Screen width:', window.innerWidth);
        });
    </script>
</body>
</html>